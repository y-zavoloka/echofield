{% load static i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}

<header>
  <div class="container header-inner">
    <h1 class="site-title"><a href="/">EchoField</a></h1>

    <nav id="lang-nav" class="lang-nav" aria-label="{% trans 'Language' %}">
      <form id="lang-form" action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="language" id="lang-input" value="{{ LANGUAGE_CODE }}">

        <div class="lang-switcher" role="radiogroup">
          {% for lang_code, lang_name in LANGUAGES %}
            <button
              type="button"
              class="lang-pill{% if lang_code == LANGUAGE_CODE %} is-active{% endif %}"
              data-lang="{{ lang_code }}"
              role="radio"
              aria-checked="{% if lang_code == LANGUAGE_CODE %}true{% else %}false{% endif %}"
            >
              {{ lang_code|upper }}
            </button>
          {% endfor %}
        </div>
      </form>
    </nav>
  </div>
</header>
